\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{array}
\usepackage{tabu}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{tikz-uml}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Python,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}
\title{A Simple Peer To Peer Network Implementation}
\author{Hoora Abootalebi\\Nariman Aryan\\Amin Isaai\\Amirhossein Khajepour\\Mahdis Tajdari\\Ali Zeynali}
\date{ November 2018}

\begin{document}


\large
\maketitle
\clearpage
\tableofcontents
\clearpage
\section{Introdeuction}
\paragraph{}This project aims to implement a peer to peer network. In the first step we design UML model and then we are going to explain each objects' attributes and methods. 
\section{UML model}
\paragraph{}We design the UML model in order to make the project more understandable, clearer and professional.
\clearpage
\begin{tikzpicture}
\umlclass[x=-5, y=3, anchor=north]{Stream}{server : dictionary \\nClient : dictionary\\ client\underline{\hspace{.05in}}msg :dict}{add\underline{\hspace{.05in}}client(ip,port)\\remove\underline{\hspace{.05in}}client(ip,port)\\rand\underline{\hspace{.05in}}inBuff()\\send\underline{\hspace{.05in}}message()} 
\umlclass[x=-9, y=-4, anchor=north]{Packet Factory}{}{parse\underline{\hspace{.05in}}bud()\\new\underline{\hspace{.05in}}reunion()\\new\underline{\hspace{.05in}}adv()\\new\underline{\hspace{.05in}}reg()} 
\umlclass[x=-1, y=-4, anchor=north]{Peer}{}{user\underline{\hspace{.05in}}interface()\\run()\\packetFactory()\\handle\underline{\hspace{.05in}}packets()} 
\umlVHVinherit[arm2=-1.2cm]{Packet Factory}{Stream} 
\umlVHVinherit[arm2=-1.2cm]{Peer}{Stream}
\umlclass[x=-4, y=-8, anchor=north]{Packet}{type: String\\node:\\header: String\\body: String\\}{}
\umlclass[x=+1.5, y=-11, anchor=north]{Reunion}{}{get\underline{\hspace{.05in}}destination()}  
\umlclass[x=0, y=-14 ,anchor=north]{Advertise}{ip: String\\port: String}{}  
\umlclass[x=-3, y=-14, anchor=north]{Message}{plain\underline{\hspace{.05in}}text : String}{}
\umlclass[x=-7, y=-14 ,anchor=north]{Register Request}{ip: String\\port: String}{}  
\umlclass[x=-9.5, y=-11, anchor=north]{Register Response}{ack : String}{}
\umlVHVinherit[arm2=-1.2cm]{Reunion}{Packet} 
\umlVHVinherit[arm2=-1.2cm]{Advertise}{Packet}
\umlVHVinherit[arm2=-1.2cm]{Message}{Packet}
\umlVHVinherit[arm2=-1.2cm]{Register Request}{Packet}
\umlVHVinherit[arm2=-1.2cm]{Register Response}{Packet}
\end{tikzpicture}
\section{Objects}
\paragraph{}Now it's time to explain every obejct's duty.
\subsection{Streem}
\begin{lstlisting}
#stream()
add_client(ip,port)
remove_client(ip,port)
rand_inBuff()
send_message()
rand_inBuff()
\end{lstlisting}
\paragraph{}We also need to add a dictionary to specify every client's message(s)
\subsection{Peer}
\begin{lstlisting}
#Peer()
stream()
user_interface()   #Which the user or client sees and works with. 
run() 				#This method runs every time to see 
				     #whether there is new messages or not.
packetFactory()
handle_packets()
\end{lstlisting}
\subsection{Packet Factory}
\paragraph{packetFactory()} would generate the packets every node needs to connect another with.
\begin{lstlisting}
#packetFactory
parse_buf()
new_reunion()
new_adv() #make a new advertise packet.
new_reg() #make a new register packet.
\end{lstlisting}
\subsection{Packet}
\paragraph{}Every packet consists seven differntes parts: :\textbf{plain\underline{\hspace{.05in}}text} which is the raw text message in the packet.\\
 \textbf{Node} \textbf{Sender} \textbf{Validator} which make the packet valid.\\ \textbf{Header} where the information such as type of the packet and etc. are going to be there.\\ \textbf{Body}  \textbf{Action}
\subsection{Reunion}
\paragraph{reunion(packet)} checks the connection of the nodes to the root.
\begin{lstlisting}
#reunion(packet)
 get_destination()
\end{lstlisting}
\subsection{Node}
\paragraph{}Every node has two parameters: \textbf{IP} and \textbf{Port}.
\subsection{Resgister Request}
\paragraph{reg\underline{\hspace{.05in}}req()} sends IP/Port of a node to the root to ask if it can register it. 
\subsection{Register Response}
\paragraph{reg\underline{\hspace{.05in}}res()} should just send an from the root $Ack$ to inform a node that it has been registerd in the root if the reg\underline{\hspace{.05in}}req() was successful.
\subsection{Advertise}
\paragraph{adv(packet)}
\subsection{Mesasge}
\paragraph{msg(packet)}
\clearpage





\end{document}
